---
Time:2021-08-09 13:10:32
---



## 一个自动生成听云卡顿周报的工具

油猴子脚本，脚本源码请参考js文件。



添加油猴子脚本后，在页面初始化时候回在听云卡顿列表头部右边新增一个按钮【导出卡顿周报】。点击后会自动生成卡顿周报并添加到网页的底部。

![](http://img.weidongfang.online/imgbed/20210809131414.png)

如下所示，这里生成表格的格式是自己定制的，可以通过源码进行修改调整。这里直接复制整个表格，粘贴到其它文档上即可。

![](http://img.weidongfang.online/imgbed/20210809131409.png)





**原理**

1. 监听到听云卡顿列表页面正在加载，执行特定的js方法，在页面固定位置添加按钮【导出卡顿周报】。
2. 点击按钮时候，响应点击事件。抓取当前页面正在展示的卡顿数据，将所有可以拿到的数据放在一个模型中。
3. 遍历所有的模型，同时创建一个table元素，将数据按照自定义格式存储到table中。
4. 最后将table元素添加到当前html的body中。

